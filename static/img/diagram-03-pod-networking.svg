<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#17a2b8"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#28a745"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="550" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="450" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1a1a2e" text-anchor="middle">Pod Network Architecture with Multus CNI</text>
  <text x="450" y="55" font-family="Arial, sans-serif" font-size="12" fill="#666" text-anchor="middle">Dual-interface pods: Primary (Calico) + Secondary (RDMA)</text>
  
  <!-- Kubernetes Node Box -->
  <rect x="50" y="75" width="800" height="450" rx="10" fill="#fff" stroke="#1a1a2e" stroke-width="2"/>
  <text x="450" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1a1a2e" text-anchor="middle">Kubernetes Node</text>
  
  <!-- CNI Layer -->
  <rect x="80" y="115" width="740" height="80" rx="6" fill="#f0f0f0" stroke="#ccc"/>
  <text x="450" y="140" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#666" text-anchor="middle">CNI Plugin Layer</text>
  
  <!-- Multus -->
  <rect x="100" y="150" width="120" height="35" rx="4" fill="#6f42c1" stroke="#5a32a3"/>
  <text x="160" y="172" font-family="Arial, sans-serif" font-size="11" fill="#fff" text-anchor="middle">Multus (Meta-CNI)</text>
  
  <!-- Calico -->
  <rect x="240" y="150" width="100" height="35" rx="4" fill="#17a2b8" stroke="#138496"/>
  <text x="290" y="172" font-family="Arial, sans-serif" font-size="11" fill="#fff" text-anchor="middle">Calico</text>
  
  <!-- Network Operator -->
  <rect x="360" y="150" width="140" height="35" rx="4" fill="#28a745" stroke="#1e7e34"/>
  <text x="430" y="172" font-family="Arial, sans-serif" font-size="11" fill="#fff" text-anchor="middle">Network Operator</text>
  
  <!-- Whereabouts -->
  <rect x="520" y="150" width="100" height="35" rx="4" fill="#fd7e14" stroke="#e56b0a"/>
  <text x="570" y="172" font-family="Arial, sans-serif" font-size="11" fill="#fff" text-anchor="middle">Whereabouts</text>
  
  <!-- Device Plugin -->
  <rect x="640" y="150" width="120" height="35" rx="4" fill="#0f3460" stroke="#0a2540"/>
  <text x="700" y="172" font-family="Arial, sans-serif" font-size="11" fill="#fff" text-anchor="middle">RDMA Device Plugin</text>
  
  <!-- Pod -->
  <rect x="250" y="220" width="400" height="200" rx="8" fill="#fff" stroke="#1a1a2e" stroke-width="2"/>
  <rect x="250" y="220" width="400" height="30" rx="8" fill="#1a1a2e"/>
  <text x="450" y="240" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">GPU Training Pod</text>
  
  <!-- Pod annotation -->
  <text x="450" y="265" font-family="Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">annotations: k8s.v1.cni.cncf.io/networks: rdma-net</text>
  
  <!-- Container -->
  <rect x="280" y="280" width="340" height="120" rx="6" fill="#f8f9fa" stroke="#dee2e6"/>
  <text x="450" y="300" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1a1a2e" text-anchor="middle">pytorch-trainer container</text>
  
  <!-- eth0 interface -->
  <rect x="300" y="315" width="130" height="70" rx="4" fill="#17a2b8" stroke="#138496"/>
  <text x="365" y="340" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">eth0</text>
  <text x="365" y="358" font-family="Arial, sans-serif" font-size="9" fill="#ddd" text-anchor="middle">Primary Interface</text>
  <text x="365" y="375" font-family="Arial, sans-serif" font-size="8" fill="#ddd" text-anchor="middle">10.244.1.15 (Calico)</text>
  
  <!-- net1 interface -->
  <rect x="470" y="315" width="130" height="70" rx="4" fill="#28a745" stroke="#1e7e34"/>
  <text x="535" y="340" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">net1</text>
  <text x="535" y="358" font-family="Arial, sans-serif" font-size="9" fill="#ddd" text-anchor="middle">Secondary Interface</text>
  <text x="535" y="375" font-family="Arial, sans-serif" font-size="8" fill="#ddd" text-anchor="middle">10.0.100.10 (RDMA)</text>
  
  <!-- GPU indicator in pod -->
  <rect x="300" y="395" width="60" height="20" rx="3" fill="#76b900"/>
  <text x="330" y="409" font-family="Arial, sans-serif" font-size="8" fill="#fff" text-anchor="middle">GPU 0</text>
  <rect x="370" y="395" width="60" height="20" rx="3" fill="#76b900"/>
  <text x="400" y="409" font-family="Arial, sans-serif" font-size="8" fill="#fff" text-anchor="middle">GPU 1</text>
  
  <!-- RDMA indicator -->
  <rect x="470" y="395" width="130" height="20" rx="3" fill="#0f3460"/>
  <text x="535" y="409" font-family="Arial, sans-serif" font-size="8" fill="#fff" text-anchor="middle">rdma/rdma_shared_device_a</text>
  
  <!-- Network boxes at bottom -->
  <!-- Calico Network -->
  <rect x="100" y="445" width="200" height="60" rx="6" fill="#17a2b8" stroke="#138496"/>
  <text x="200" y="472" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#fff" text-anchor="middle">Calico Network</text>
  <text x="200" y="490" font-family="Arial, sans-serif" font-size="9" fill="#ddd" text-anchor="middle">Pod CIDR: 10.244.0.0/16</text>
  
  <!-- RDMA Network -->
  <rect x="600" y="445" width="200" height="60" rx="6" fill="#28a745" stroke="#1e7e34"/>
  <text x="700" y="472" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#fff" text-anchor="middle">RDMA Network</text>
  <text x="700" y="490" font-family="Arial, sans-serif" font-size="9" fill="#ddd" text-anchor="middle">Subnet: 10.0.100.0/24</text>
  
  <!-- Connection lines -->
  <!-- eth0 to Calico -->
  <line x1="365" y1="385" x2="365" y2="420" stroke="#17a2b8" stroke-width="2"/>
  <line x1="365" y1="420" x2="200" y2="420" stroke="#17a2b8" stroke-width="2"/>
  <line x1="200" y1="420" x2="200" y2="445" stroke="#17a2b8" stroke-width="2" marker-end="url(#arrow-blue)"/>
  
  <!-- net1 to RDMA -->
  <line x1="535" y1="385" x2="535" y2="420" stroke="#28a745" stroke-width="2"/>
  <line x1="535" y1="420" x2="700" y2="420" stroke="#28a745" stroke-width="2"/>
  <line x1="700" y1="420" x2="700" y2="445" stroke="#28a745" stroke-width="2" marker-end="url(#arrow-green)"/>
  
  <!-- Traffic labels -->
  <rect x="80" y="510" width="250" height="35" rx="4" fill="#e3f2fd" stroke="#17a2b8"/>
  <text x="205" y="525" font-family="Arial, sans-serif" font-size="9" fill="#17a2b8" text-anchor="middle">K8s API • DNS • Services</text>
  <text x="205" y="538" font-family="Arial, sans-serif" font-size="9" fill="#17a2b8" text-anchor="middle">NFS mounts • Monitoring</text>
  
  <rect x="570" y="510" width="250" height="35" rx="4" fill="#d4edda" stroke="#28a745"/>
  <text x="695" y="525" font-family="Arial, sans-serif" font-size="9" fill="#28a745" text-anchor="middle">NCCL AllReduce • Gradient Sync</text>
  <text x="695" y="538" font-family="Arial, sans-serif" font-size="9" fill="#28a745" text-anchor="middle">GPUDirect RDMA traffic</text>
  
  <!-- NCCL env var callout -->
  <rect x="680" y="280" width="150" height="60" rx="4" fill="#fff3cd" stroke="#ffc107"/>
  <text x="755" y="298" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#856404" text-anchor="middle">NCCL Config</text>
  <text x="755" y="312" font-family="Arial, sans-serif" font-size="8" fill="#856404" text-anchor="middle">NCCL_IB_DISABLE=0</text>
  <text x="755" y="324" font-family="Arial, sans-serif" font-size="8" fill="#856404" text-anchor="middle">NCCL_SOCKET_IFNAME=net1</text>
  <text x="755" y="336" font-family="Arial, sans-serif" font-size="8" fill="#856404" text-anchor="middle">NCCL_IB_HCA=mlx5_0</text>
  
  <!-- Arrow from callout to net1 -->
  <line x1="680" y1="315" x2="605" y2="350" stroke="#ffc107" stroke-width="1" stroke-dasharray="4"/>
</svg>
